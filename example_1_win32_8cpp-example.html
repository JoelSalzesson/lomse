<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Lomse library. API documentation: example_1_win32.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="lomse.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_100x195.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Lomse library. API documentation
   &#160;<span id="projectnumber">0.26.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('example_1_win32_8cpp-example.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">example_1_win32.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>Code for WindowsXP. Example 1: How to display a music score.</p>
<div class="fragment"><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="comment">// This is free and unencumbered software released into the public domain.</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Anyone is free to copy, modify, publish, use, compile, sell, or</span></div><div class="line"><span class="comment">// distribute this software, either in source code form or as a compiled</span></div><div class="line"><span class="comment">// binary, for any purpose, commercial or non-commercial, and by any</span></div><div class="line"><span class="comment">// means.</span></div><div class="line"><span class="comment">// </span></div><div class="line"><span class="comment">// In jurisdictions that recognize copyright laws, the author or authors</span></div><div class="line"><span class="comment">// of this software dedicate any and all copyright interest in the</span></div><div class="line"><span class="comment">// software to the public domain. We make this dedication for the benefit</span></div><div class="line"><span class="comment">// of the public at large and to the detriment of our heirs and</span></div><div class="line"><span class="comment">// successors. We intend this dedication to be an overt act of</span></div><div class="line"><span class="comment">// relinquishment in perpetuity of all present and future rights to this</span></div><div class="line"><span class="comment">// software under copyright law.</span></div><div class="line"><span class="comment">// </span></div><div class="line"><span class="comment">// THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND,</span></div><div class="line"><span class="comment">// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF</span></div><div class="line"><span class="comment">// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.</span></div><div class="line"><span class="comment">// IN NO EVENT SHALL THE AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR</span></div><div class="line"><span class="comment">// OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,</span></div><div class="line"><span class="comment">// ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR</span></div><div class="line"><span class="comment">// OTHER DEALINGS IN THE SOFTWARE.</span></div><div class="line"><span class="comment">// </span></div><div class="line"><span class="comment">// For more information, please refer to &lt;http:unlicense.org&gt;</span></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"></div><div class="line"><span class="comment">// header files required by Microsoft stuff</span></div><div class="line"><span class="preprocessor">#include &lt;windows.h&gt;</span></div><div class="line"></div><div class="line"><span class="comment">//lomse headers</span></div><div class="line"><span class="preprocessor">#include &lt;lomse_doorway.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;lomse_document.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;lomse_graphic_view.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;lomse_interactor.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;lomse_presenter.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;lomse_events.h&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span>lomse;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="comment">// Helper class to create and manage bitmaps</span></div><div class="line"><span class="comment">// This class is copied (and simplified) from AGG project.</span></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="comment">// Anti-Grain Geometry - Version 2.4</span></div><div class="line"><span class="comment">// Copyright (C) 2002-2005 Maxim Shemanarev (http://www.antigrain.com)</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="comment">// Permission to copy, use, modify, sell and distribute this software </span></div><div class="line"><span class="comment">// is granted provided this copyright notice appears in all copies. </span></div><div class="line"><span class="comment">// This software is provided &quot;as is&quot; without express or implied</span></div><div class="line"><span class="comment">// warranty, and with no claim as to its suitability for any purpose.</span></div><div class="line"></div><div class="line"><span class="keyword">class </span>Bitmap</div><div class="line">{</div><div class="line"><span class="keyword">private</span>:</div><div class="line">    BITMAPINFO*    m_bmp;</div><div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* m_buf;</div><div class="line">    <span class="keywordtype">unsigned</span>       m_bpp;</div><div class="line">    <span class="keywordtype">bool</span>           m_is_internal;</div><div class="line">    <span class="keywordtype">unsigned</span>       m_img_size;</div><div class="line">    <span class="keywordtype">unsigned</span>       m_full_size;</div><div class="line"></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    Bitmap();</div><div class="line">    ~Bitmap();</div><div class="line"></div><div class="line">    <span class="keywordtype">void</span> destroy();</div><div class="line">    <span class="keywordtype">void</span> create(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> width, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> height, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bpp,</div><div class="line">                <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> clear_val=256);</div><div class="line"></div><div class="line">    <span class="keywordtype">void</span> draw(HDC h_dc, <span class="keyword">const</span> RECT* device_rect=0, <span class="keyword">const</span> RECT* bmp_rect=0) <span class="keyword">const</span>;</div><div class="line"></div><div class="line">    <span class="keyword">inline</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* buf() {<span class="keywordflow">return</span> m_buf; };</div><div class="line">    <span class="keyword">inline</span> <span class="keywordtype">unsigned</span> width()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_bmp-&gt;bmiHeader.biWidth; }</div><div class="line">    <span class="keyword">inline</span> <span class="keywordtype">unsigned</span> height()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> m_bmp-&gt;bmiHeader.biHeight; }</div><div class="line">    <span class="keywordtype">int</span> stride() <span class="keyword">const</span>;</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    <span class="comment">//Auxiliary static functions</span></div><div class="line">    <span class="keyword">static</span> <span class="keywordtype">unsigned</span> calc_full_size(BITMAPINFO *bmp);</div><div class="line">    <span class="keyword">static</span> <span class="keywordtype">unsigned</span> calc_header_size(BITMAPINFO *bmp);</div><div class="line">    <span class="keyword">static</span> <span class="keywordtype">unsigned</span> calc_palette_size(<span class="keywordtype">unsigned</span> clr_used, </div><div class="line">                                        <span class="keywordtype">unsigned</span> bits_per_pixel);</div><div class="line">    <span class="keyword">static</span> <span class="keywordtype">unsigned</span> calc_palette_size(BITMAPINFO *bmp);</div><div class="line">    <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* calc_img_ptr(BITMAPINFO *bmp);</div><div class="line">    <span class="keyword">static</span> BITMAPINFO* create_bitmap_info(<span class="keywordtype">unsigned</span> width, </div><div class="line">                                            <span class="keywordtype">unsigned</span> height, </div><div class="line">                                            <span class="keywordtype">unsigned</span> bits_per_pixel);</div><div class="line">    <span class="keyword">static</span> <span class="keywordtype">void</span>     create_gray_scale_palette(BITMAPINFO *bmp);</div><div class="line">    <span class="keyword">static</span> <span class="keywordtype">unsigned</span> calc_row_len(<span class="keywordtype">unsigned</span> width, <span class="keywordtype">unsigned</span> bits_per_pixel);</div><div class="line">    </div><div class="line">    <span class="keywordtype">void</span> create_from_bmp(BITMAPINFO *bmp);</div><div class="line"></div><div class="line">};</div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="comment">// Global variables</span></div><div class="line"><span class="comment">// In this first example we are just going to display an score on the main window.</span></div><div class="line"><span class="comment">// Let&#39;s define the necessary variables:</span></div><div class="line"><span class="comment">//</span></div><div class="line"><a name="_a0"></a><a class="code" href="classLomseDoorway.html">LomseDoorway</a>    m_lomse;        <span class="comment">//the Lomse library doorway</span></div><div class="line"><a name="_a1"></a><a class="code" href="classPresenter.html">Presenter</a>*      m_pPresenter;</div><div class="line"></div><div class="line"><span class="comment">//the Lomse View renders its content on a bitmap. To manage it, Lomse</span></div><div class="line"><span class="comment">//associates the bitmap to a RenderingBuffer object.</span></div><div class="line"><span class="comment">//It is your responsibility to render the bitmap on a window.</span></div><div class="line"><span class="comment">//Here you define the rendering buffer and its associated bitmap</span></div><div class="line">RenderingBuffer     m_rbuf_window;</div><div class="line">Bitmap              m_bitmap;</div><div class="line"></div><div class="line"><span class="comment">//Lomse can manage a lot of bitmap formats and pixel formats. You must</span></div><div class="line"><span class="comment">//define the format that you are going to use </span></div><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>        m_bpp;         <span class="comment">//bits per pixel</span></div><div class="line"></div><div class="line"><span class="comment">//some additinal variables</span></div><div class="line"><span class="keywordtype">bool</span>    m_view_needs_redraw;      <span class="comment">//to control when the View must be re-drawed</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// All typical MS Windows stuff needed to run the program and the main events handler loop</span></div><div class="line">HINSTANCE m_hInst;      <span class="comment">//current instance</span></div><div class="line">HWND m_hWnd;            <span class="comment">//the main window</span></div><div class="line"></div><div class="line"><span class="comment">//forward declarations</span></div><div class="line">LRESULT CALLBACK    WndProc(HWND, UINT, WPARAM, LPARAM);</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">void</span> create_bitmap_for_the_rendering_buffer(<span class="keywordtype">unsigned</span> width, <span class="keywordtype">unsigned</span> height)</div><div class="line">{</div><div class="line">    <span class="comment">//creates a bitmap of specified size and associates it to the rendering</span></div><div class="line">    <span class="comment">//buffer for the view. Any existing buffer is automatically deleted</span></div><div class="line"></div><div class="line">    m_bitmap.create(width, height, m_bpp);</div><div class="line">    m_rbuf_window.attach(m_bitmap.buf(), </div><div class="line">                         m_bitmap.width(),</div><div class="line">                         m_bitmap.height(),</div><div class="line">                         m_bitmap.stride()</div><div class="line">                        );</div><div class="line">    m_view_needs_redraw = <span class="keyword">true</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">void</span> copy_buffer_on_dc(HDC dc)</div><div class="line">{</div><div class="line">    m_bitmap.draw(dc);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">void</span> open_test_document()</div><div class="line">{</div><div class="line">    <span class="comment">//Normally you will load the content of a file. But in this simple example we</span></div><div class="line">    <span class="comment">//will create an empty document and define its content from a text string</span></div><div class="line"></div><div class="line">    <span class="comment">//first, we will create a &#39;presenter&#39;. It takes care of creating and maintaining</span></div><div class="line">    <span class="comment">//all objects and relationships between the document, its views and the interactors</span></div><div class="line">    <span class="comment">//to interact with the view</span></div><div class="line">    <span class="keyword">delete</span> m_pPresenter;</div><div class="line">    m_pPresenter = m_lomse.<a name="a2"></a><a class="code" href="classLomseDoorway.html#a1b00546f591c2041df5ed86ea0681948">new_document</a>(k_view_vertical_book,</div><div class="line">        <span class="stringliteral">&quot;(lenmusdoc (vers 0.0)&quot;</span></div><div class="line">            <span class="stringliteral">&quot;(content &quot;</span></div><div class="line">                <span class="stringliteral">&quot;(para (txt \&quot;Hello world!\&quot;))&quot;</span></div><div class="line">                <span class="stringliteral">&quot;(score (vers 1.6) &quot;</span></div><div class="line">                    <span class="stringliteral">&quot;(instrument (musicData (clef G)(key C)(time 2 4)(n c4 q) )))&quot;</span></div><div class="line">            <span class="stringliteral">&quot;)&quot;</span></div><div class="line">        <span class="stringliteral">&quot;)&quot;</span>,</div><div class="line">        <a name="a3"></a><a class="code" href="classDocument.html#a0af272723339cb2f42e33aeadeb55b24a228b51dcf229a1423f0f1734b422846e">Document::k_format_ldp</a>);</div><div class="line"></div><div class="line">    <span class="comment">//get the pointer to the interactor, set the rendering buffer and register for</span></div><div class="line">    <span class="comment">//receiving desired events</span></div><div class="line">    <span class="keywordflow">if</span> (SpInteractor spInteractor = m_pPresenter-&gt;<a name="a4"></a><a class="code" href="classPresenter.html#a3542802890a4615d251a5a786cee62b5">get_interactor</a>(0).lock())</div><div class="line">    {</div><div class="line">        <span class="comment">//connect the View with the window buffer</span></div><div class="line">        spInteractor-&gt;set_rendering_buffer(&amp;m_rbuf_window);</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">void</span> update_rendering_buffer_if_needed()</div><div class="line">{</div><div class="line">    <span class="comment">//request the view to re-draw the bitmap</span></div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (!m_pPresenter) <span class="keywordflow">return</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (m_view_needs_redraw)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">if</span> (SpInteractor spInteractor = m_pPresenter-&gt;<a class="code" href="classPresenter.html#a3542802890a4615d251a5a786cee62b5">get_interactor</a>(0).lock())</div><div class="line">            spInteractor-&gt;force_redraw();</div><div class="line">        m_view_needs_redraw = <span class="keyword">false</span>;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">void</span> initialize_lomse()</div><div class="line">{</div><div class="line">    <span class="comment">// Lomse knows nothing about windows. It renders everything on a bitmap and the</span></div><div class="line">    <span class="comment">// user application uses this bitmap. For instance, to display it on a window.</span></div><div class="line">    <span class="comment">// Lomse supports a lot of bitmap formats and pixel formats. Therefore, before</span></div><div class="line">    <span class="comment">// using the Lomse library you MUST specify which bitmap formap to use.</span></div><div class="line">    <span class="comment">//</span></div><div class="line">    <span class="comment">// For native MS Windows applications you can use, for instance, pixel format</span></div><div class="line">    <span class="comment">// BGRA, 32 bits. Screen resolution, in MS Windows, is 96 pixels per inch.</span></div><div class="line">    <span class="comment">// Let&#39;s define the requiered information:</span></div><div class="line"></div><div class="line">        <span class="comment">//the pixel format</span></div><div class="line">        <span class="keywordtype">int</span> pixel_format = <a name="a5"></a><a class="code" href="group__enumerations.html#ggafb559e26bc610db43ba605230a142898acbfd950e1ef577e4a697ad2dadd30ec7">k_pix_format_bgra32</a>;  <span class="comment">//BGRA, 32 bits</span></div><div class="line">        m_bpp = 32;                              <span class="comment">//32 bits per pixel</span></div><div class="line"></div><div class="line">        <span class="comment">//the desired resolution. For MS Windows use 96 pixels per inch</span></div><div class="line">        <span class="keywordtype">int</span> resolution = 96;    <span class="comment">//96 ppi</span></div><div class="line"></div><div class="line">        <span class="comment">//Lomse default y axis direction is 0 coordinate at top and increases</span></div><div class="line">        <span class="comment">//downwards. You must specify if you would like just the opposite behaviour.</span></div><div class="line">        <span class="comment">//For MS Windows the Lomse default behaviour is the right behaviour.</span></div><div class="line">        <span class="keywordtype">bool</span> reverse_y_axis = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">    <span class="comment">//initialize the Lomse library with these values</span></div><div class="line">    m_lomse.<a name="a6"></a><a class="code" href="classLomseDoorway.html#a01e4f12682054e5a96afa236501ac80f">init_library</a>(pixel_format, resolution, reverse_y_axis);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">int</span> handle_events()</div><div class="line">{</div><div class="line">    <span class="comment">//the main event handling loop</span></div><div class="line">    MSG msg;</div><div class="line">    <span class="keywordflow">while</span> (GetMessage(&amp;msg, NULL, 0, 0)) </div><div class="line">    {</div><div class="line">        <span class="keywordflow">if</span> (!TranslateAccelerator(msg.hwnd, NULL, &amp;msg)) </div><div class="line">        {</div><div class="line">            TranslateMessage(&amp;msg);</div><div class="line">            DispatchMessage(&amp;msg);</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) msg.wParam;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">void</span> free_resources()</div><div class="line">{</div><div class="line">    <span class="comment">//delete the Presenter. </span></div><div class="line">    <span class="comment">//This will also delete the Interactor, the Document and the View</span></div><div class="line">    <span class="keyword">delete</span> m_pPresenter;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="comment">// register this window class</span></div><div class="line"><span class="comment">//</span></div><div class="line">ATOM register_window_class(HINSTANCE hInstance)</div><div class="line">{</div><div class="line">    WNDCLASSEX wcex;</div><div class="line"></div><div class="line">    m_hInst = hInstance;</div><div class="line">    wcex.cbSize = <span class="keyword">sizeof</span>(WNDCLASSEX); </div><div class="line"></div><div class="line">    wcex.style          = CS_HREDRAW | CS_VREDRAW;</div><div class="line">    wcex.lpfnWndProc    = (WNDPROC)WndProc;</div><div class="line">    wcex.cbClsExtra     = 0;</div><div class="line">    wcex.cbWndExtra     = 0;</div><div class="line">    wcex.hInstance      = m_hInst;</div><div class="line">    wcex.hIcon          = LoadIcon(NULL, IDI_APPLICATION); </div><div class="line">    wcex.hCursor        = LoadCursor(NULL, IDC_ARROW); </div><div class="line">    wcex.hbrBackground  = (HBRUSH)(COLOR_WINDOW+1);</div><div class="line">    wcex.lpszMenuName   = 0;</div><div class="line">    wcex.lpszClassName  = <span class="stringliteral">&quot;Lomse_Example1&quot;</span>;</div><div class="line">    wcex.hIconSm        = 0;</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> RegisterClassEx(&amp;wcex);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="comment">// save instance identifier and create main window</span></div><div class="line"><span class="comment">//</span></div><div class="line">BOOL create_main_window(<span class="keywordtype">int</span> nCmdShow)</div><div class="line">{</div><div class="line">    m_hWnd = CreateWindow( <span class="stringliteral">&quot;Lomse_Example1&quot;</span>                 <span class="comment">//class name</span></div><div class="line">                         , <span class="stringliteral">&quot;Lomse tutorial 1 for win32&quot;</span>     <span class="comment">//window caption</span></div><div class="line">                         , WS_OVERLAPPEDWINDOW              <span class="comment">//wflags</span></div><div class="line">                         , CW_USEDEFAULT                    <span class="comment">//pos-x</span></div><div class="line">                         , 0                                <span class="comment">//pos-y</span></div><div class="line">                         , 840                              <span class="comment">//width</span></div><div class="line">                         , 600                              <span class="comment">//height</span></div><div class="line">                         , NULL                             <span class="comment">//parent Window</span></div><div class="line">                         , NULL                             <span class="comment">//menu, or windows id if child</span></div><div class="line">                         , m_hInst</div><div class="line">                         , NULL                             <span class="comment">//ptr to window specific data</span></div><div class="line">             );</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (!m_hWnd)</div><div class="line">        <span class="keywordflow">return</span> FALSE;</div><div class="line"></div><div class="line">    <span class="comment">//display the window</span></div><div class="line">    ShowWindow(m_hWnd, nCmdShow);</div><div class="line">    UpdateWindow(m_hWnd);</div><div class="line">    <span class="keywordflow">return</span> TRUE;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="comment">// messages dispatcher for main window</span></div><div class="line"><span class="comment">//</span></div><div class="line">LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)</div><div class="line">{</div><div class="line">    <span class="keywordflow">switch</span> (message) </div><div class="line">    {</div><div class="line">        <span class="comment">//-------------------------------------------------</span></div><div class="line">        <span class="keywordflow">case</span> WM_PAINT:</div><div class="line">        {</div><div class="line">            <span class="keywordflow">if</span> (m_view_needs_redraw)</div><div class="line">                update_rendering_buffer_if_needed();</div><div class="line">            m_view_needs_redraw = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">            PAINTSTRUCT ps;</div><div class="line">            HDC paintDC = ::BeginPaint(m_hWnd, &amp;ps);</div><div class="line">            copy_buffer_on_dc(paintDC);</div><div class="line">            ::EndPaint(m_hWnd, &amp;ps);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        }</div><div class="line">    </div><div class="line">        <span class="comment">//--------------------------------------------------------------------</span></div><div class="line">        <span class="keywordflow">case</span> WM_SIZE:</div><div class="line">            create_bitmap_for_the_rendering_buffer(LOWORD(lParam), HIWORD(lParam));</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        </div><div class="line">        <span class="comment">//--------------------------------------------------------------------</span></div><div class="line">        <span class="keywordflow">case</span> WM_ERASEBKGND:</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line">        </div><div class="line">        <span class="comment">//--------------------------------------------------------------------</span></div><div class="line">        <span class="keywordflow">case</span> WM_DESTROY:</div><div class="line">            PostQuitMessage(0);</div><div class="line">            <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="comment">//--------------------------------------------------------------------</span></div><div class="line">        <span class="keywordflow">default</span>:</div><div class="line">            <span class="keywordflow">return</span> DefWindowProc(hWnd, message, wParam, lParam);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> 0;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="comment">// application main entry point</span></div><div class="line"><span class="comment">//</span></div><div class="line"><span class="keywordtype">int</span> WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, </div><div class="line">                   LPSTR lpCmdLine, <span class="keywordtype">int</span> nCmdShow)</div><div class="line">{</div><div class="line">    register_window_class(hInstance);</div><div class="line">    initialize_lomse();</div><div class="line"></div><div class="line">    <span class="comment">//create a music score and a View. The view will display the score </span></div><div class="line">    <span class="comment">//when a paint event is received, once the main windows is</span></div><div class="line">    <span class="comment">//shown and the event handling loop is started</span></div><div class="line">    open_test_document();</div><div class="line"></div><div class="line">    <span class="comment">//initialize and show main window</span></div><div class="line">    <span class="keywordflow">if</span> (!create_main_window(nCmdShow)) </div><div class="line">        <span class="keywordflow">return</span> FALSE;</div><div class="line">    </div><div class="line">    <span class="comment">//enter the main event handling loop</span></div><div class="line">    <span class="keywordtype">int</span> retcode = handle_events(); </div><div class="line"></div><div class="line">    <span class="comment">//terminate the application</span></div><div class="line">    free_resources();</div><div class="line">    <span class="keywordflow">return</span> retcode;</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="comment">// Implementation of helper class Bitmap</span></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line">Bitmap::Bitmap()</div><div class="line">    : m_bmp(0)</div><div class="line">    , m_buf(0)</div><div class="line">    , m_bpp(0)</div><div class="line">    , m_is_internal(<span class="keyword">false</span>)</div><div class="line">    , m_img_size(0)</div><div class="line">    , m_full_size(0)</div><div class="line">{</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line">Bitmap::~Bitmap()</div><div class="line">{</div><div class="line">    destroy();</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">void</span> Bitmap::destroy()</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span>(m_bmp &amp;&amp; m_is_internal)</div><div class="line">        <span class="keyword">delete</span> [] (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)m_bmp;</div><div class="line">    m_bmp  = 0;</div><div class="line">    m_is_internal = <span class="keyword">false</span>;</div><div class="line">    m_buf = 0;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">void</span> Bitmap::create(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> width, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> height, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bpp,</div><div class="line">                        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> clear_val)</div><div class="line">{</div><div class="line">    destroy();</div><div class="line">    <span class="keywordflow">if</span>(width == 0)  width = 1;</div><div class="line">    <span class="keywordflow">if</span>(height == 0) height = 1;</div><div class="line">    m_bpp = bpp;</div><div class="line">    create_from_bmp(create_bitmap_info(width, height, m_bpp));</div><div class="line">    create_gray_scale_palette(m_bmp);</div><div class="line">    m_is_internal = <span class="keyword">true</span>;</div><div class="line">    <span class="keywordflow">if</span>(clear_val &lt;= 255)</div><div class="line">    {</div><div class="line">        memset(m_buf, clear_val, m_img_size);</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">unsigned</span> Bitmap::calc_full_size(BITMAPINFO *bmp)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span>(bmp == 0) <span class="keywordflow">return</span> 0;</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> <span class="keyword">sizeof</span>(BITMAPINFOHEADER) +</div><div class="line">            <span class="keyword">sizeof</span>(RGBQUAD) * calc_palette_size(bmp) +</div><div class="line">            bmp-&gt;bmiHeader.biSizeImage;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">unsigned</span> Bitmap::calc_header_size(BITMAPINFO *bmp)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span>(bmp == 0) <span class="keywordflow">return</span> 0;</div><div class="line">    <span class="keywordflow">return</span> <span class="keyword">sizeof</span>(BITMAPINFOHEADER) + <span class="keyword">sizeof</span>(RGBQUAD) * calc_palette_size(bmp);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">unsigned</span>  Bitmap::calc_palette_size(<span class="keywordtype">unsigned</span>  clr_used, <span class="keywordtype">unsigned</span> bits_per_pixel)</div><div class="line">{</div><div class="line">    <span class="keywordtype">int</span> palette_size = 0;</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span>(bits_per_pixel &lt;= 8)</div><div class="line">    {</div><div class="line">        palette_size = clr_used;</div><div class="line">        <span class="keywordflow">if</span>(palette_size == 0)</div><div class="line">        {</div><div class="line">            palette_size = 1 &lt;&lt; bits_per_pixel;</div><div class="line">        }</div><div class="line">    }</div><div class="line">    <span class="keywordflow">return</span> palette_size;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">unsigned</span> Bitmap::calc_palette_size(BITMAPINFO *bmp)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span>(bmp == 0) <span class="keywordflow">return</span> 0;</div><div class="line">    <span class="keywordflow">return</span> calc_palette_size(bmp-&gt;bmiHeader.biClrUsed, bmp-&gt;bmiHeader.biBitCount);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * Bitmap::calc_img_ptr(BITMAPINFO *bmp)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span>(bmp == 0) <span class="keywordflow">return</span> 0;</div><div class="line">    <span class="keywordflow">return</span> ((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)bmp) + calc_header_size(bmp);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line">BITMAPINFO* Bitmap::create_bitmap_info(<span class="keywordtype">unsigned</span> width, </div><div class="line">                                            <span class="keywordtype">unsigned</span> height, </div><div class="line">                                            <span class="keywordtype">unsigned</span> bits_per_pixel)</div><div class="line">{</div><div class="line">    <span class="keywordtype">unsigned</span> line_len = calc_row_len(width, bits_per_pixel);</div><div class="line">    <span class="keywordtype">unsigned</span> img_size = line_len * height;</div><div class="line">    <span class="keywordtype">unsigned</span> rgb_size = calc_palette_size(0, bits_per_pixel) * <span class="keyword">sizeof</span>(RGBQUAD);</div><div class="line">    <span class="keywordtype">unsigned</span> full_size = <span class="keyword">sizeof</span>(BITMAPINFOHEADER) + rgb_size + img_size;</div><div class="line"></div><div class="line">    BITMAPINFO *bmp = (BITMAPINFO *) <span class="keyword">new</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[full_size];</div><div class="line"></div><div class="line">    bmp-&gt;bmiHeader.biSize   = <span class="keyword">sizeof</span>(BITMAPINFOHEADER);</div><div class="line">    bmp-&gt;bmiHeader.biWidth  = width;</div><div class="line">    bmp-&gt;bmiHeader.biHeight = height;</div><div class="line">    bmp-&gt;bmiHeader.biPlanes = 1;</div><div class="line">    bmp-&gt;bmiHeader.biBitCount = (<span class="keywordtype">unsigned</span> short)bits_per_pixel;</div><div class="line">    bmp-&gt;bmiHeader.biCompression = 0;</div><div class="line">    bmp-&gt;bmiHeader.biSizeImage = img_size;</div><div class="line">    bmp-&gt;bmiHeader.biXPelsPerMeter = 0;</div><div class="line">    bmp-&gt;bmiHeader.biYPelsPerMeter = 0;</div><div class="line">    bmp-&gt;bmiHeader.biClrUsed = 0;</div><div class="line">    bmp-&gt;bmiHeader.biClrImportant = 0;</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> bmp;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">void</span> Bitmap::create_gray_scale_palette(BITMAPINFO *bmp)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span>(bmp == 0) <span class="keywordflow">return</span>;</div><div class="line"></div><div class="line">    <span class="keywordtype">unsigned</span> rgb_size = calc_palette_size(bmp);</div><div class="line">    RGBQUAD *rgb = (RGBQUAD*)(((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)bmp) + <span class="keyword">sizeof</span>(BITMAPINFOHEADER));</div><div class="line">    <span class="keywordtype">unsigned</span> brightness;</div><div class="line">    <span class="keywordtype">unsigned</span> i;</div><div class="line"></div><div class="line">    <span class="keywordflow">for</span>(i = 0; i &lt; rgb_size; i++)</div><div class="line">    {</div><div class="line">        brightness = (255 * i) / (rgb_size - 1);</div><div class="line">        rgb-&gt;rgbBlue =</div><div class="line">        rgb-&gt;rgbGreen =  </div><div class="line">        rgb-&gt;rgbRed = (<span class="keywordtype">unsigned</span> char)brightness; </div><div class="line">        rgb-&gt;rgbReserved = 0;</div><div class="line">        rgb++;</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">unsigned</span> Bitmap::calc_row_len(<span class="keywordtype">unsigned</span> width, <span class="keywordtype">unsigned</span> bits_per_pixel)</div><div class="line">{</div><div class="line">    <span class="keywordtype">unsigned</span> n = width;</div><div class="line">    <span class="keywordtype">unsigned</span> k;</div><div class="line"></div><div class="line">    <span class="keywordflow">switch</span>(bits_per_pixel)</div><div class="line">    {</div><div class="line">        <span class="keywordflow">case</span>  1: k = n;</div><div class="line">                    n = n &gt;&gt; 3;</div><div class="line">                    <span class="keywordflow">if</span>(k &amp; 7) n++; </div><div class="line">                    <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span>  4: k = n;</div><div class="line">                    n = n &gt;&gt; 1;</div><div class="line">                    <span class="keywordflow">if</span>(k &amp; 3) n++; </div><div class="line">                    <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span>  8:</div><div class="line">                    <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> 16: n *= 2;</div><div class="line">                    <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> 24: n *= 3; </div><div class="line">                    <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> 32: n *= 4;</div><div class="line">                    <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> 48: n *= 6; </div><div class="line">                    <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">case</span> 64: n *= 8; </div><div class="line">                    <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">        <span class="keywordflow">default</span>: n = 0;</div><div class="line">                    <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">    <span class="keywordflow">return</span> ((n + 3) &gt;&gt; 2) &lt;&lt; 2;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">void</span> Bitmap::draw(HDC h_dc, <span class="keyword">const</span> RECT *device_rect, <span class="keyword">const</span> RECT *bmp_rect)<span class="keyword"> const</span></div><div class="line"><span class="keyword"></span>{</div><div class="line">    <span class="keywordflow">if</span>(m_bmp == 0 || m_buf == 0) <span class="keywordflow">return</span>;</div><div class="line"></div><div class="line">    <span class="keywordtype">unsigned</span> bmp_x = 0;</div><div class="line">    <span class="keywordtype">unsigned</span> bmp_y = 0;</div><div class="line">    <span class="keywordtype">unsigned</span> bmp_width  = m_bmp-&gt;bmiHeader.biWidth;</div><div class="line">    <span class="keywordtype">unsigned</span> bmp_height = m_bmp-&gt;bmiHeader.biHeight;</div><div class="line">    <span class="keywordtype">unsigned</span> dvc_x = 0;</div><div class="line">    <span class="keywordtype">unsigned</span> dvc_y = 0; </div><div class="line">    <span class="keywordtype">unsigned</span> dvc_width  = m_bmp-&gt;bmiHeader.biWidth;</div><div class="line">    <span class="keywordtype">unsigned</span> dvc_height = m_bmp-&gt;bmiHeader.biHeight;</div><div class="line">    </div><div class="line">    <span class="keywordflow">if</span>(bmp_rect) </div><div class="line">    {</div><div class="line">        bmp_x      = bmp_rect-&gt;left;</div><div class="line">        bmp_y      = bmp_rect-&gt;top;</div><div class="line">        bmp_width  = bmp_rect-&gt;right  - bmp_rect-&gt;left;</div><div class="line">        bmp_height = bmp_rect-&gt;bottom - bmp_rect-&gt;top;</div><div class="line">    } </div><div class="line"></div><div class="line">    dvc_x      = bmp_x;</div><div class="line">    dvc_y      = bmp_y;</div><div class="line">    dvc_width  = bmp_width;</div><div class="line">    dvc_height = bmp_height;</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span>(device_rect) </div><div class="line">    {</div><div class="line">        dvc_x      = device_rect-&gt;left;</div><div class="line">        dvc_y      = device_rect-&gt;top;</div><div class="line">        dvc_width  = device_rect-&gt;right  - device_rect-&gt;left;</div><div class="line">        dvc_height = device_rect-&gt;bottom - device_rect-&gt;top;</div><div class="line">    }</div><div class="line"></div><div class="line">    m_bmp-&gt;bmiHeader.biHeight = -abs(m_bmp-&gt;bmiHeader.biHeight);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span>(dvc_width != bmp_width || dvc_height != bmp_height)</div><div class="line">    {</div><div class="line">        ::SetStretchBltMode(h_dc, COLORONCOLOR);</div><div class="line">        ::StretchDIBits(</div><div class="line">            h_dc,            <span class="comment">// handle of device context </span></div><div class="line">            dvc_x,           <span class="comment">// x-coordinate of upper-left corner of source rect. </span></div><div class="line">            dvc_y,           <span class="comment">// y-coordinate of upper-left corner of source rect. </span></div><div class="line">            dvc_width,       <span class="comment">// width of source rectangle </span></div><div class="line">            dvc_height,      <span class="comment">// height of source rectangle </span></div><div class="line">            bmp_x,</div><div class="line">            bmp_y,           <span class="comment">// x, y -coordinates of upper-left corner of dest. rect. </span></div><div class="line">            bmp_width,       <span class="comment">// width of destination rectangle </span></div><div class="line">            bmp_height,      <span class="comment">// height of destination rectangle </span></div><div class="line">            m_buf,           <span class="comment">// address of bitmap bits </span></div><div class="line">            m_bmp,           <span class="comment">// address of bitmap data </span></div><div class="line">            DIB_RGB_COLORS,  <span class="comment">// usage </span></div><div class="line">            SRCCOPY          <span class="comment">// raster operation code </span></div><div class="line">        );</div><div class="line">    }</div><div class="line">    <span class="keywordflow">else</span></div><div class="line">    {</div><div class="line">        ::SetDIBitsToDevice(</div><div class="line">            h_dc,            <span class="comment">// handle to device context</span></div><div class="line">            dvc_x,           <span class="comment">// x-coordinate of upper-left corner of </span></div><div class="line">            dvc_y,           <span class="comment">// y-coordinate of upper-left corner of </span></div><div class="line">            dvc_width,       <span class="comment">// source rectangle width</span></div><div class="line">            dvc_height,      <span class="comment">// source rectangle height</span></div><div class="line">            bmp_x,           <span class="comment">// x-coordinate of lower-left corner of </span></div><div class="line">            bmp_y,           <span class="comment">// y-coordinate of lower-left corner of </span></div><div class="line">            0,               <span class="comment">// first scan line in array</span></div><div class="line">            bmp_height,      <span class="comment">// number of scan lines</span></div><div class="line">            m_buf,           <span class="comment">// address of array with DIB bits</span></div><div class="line">            m_bmp,           <span class="comment">// address of structure with bitmap info.</span></div><div class="line">            DIB_RGB_COLORS   <span class="comment">// RGB or palette indexes</span></div><div class="line">        );</div><div class="line">    }</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">int</span> Bitmap::stride()<span class="keyword"> const</span></div><div class="line"><span class="keyword"></span>{</div><div class="line">    <span class="keywordflow">return</span> calc_row_len(m_bmp-&gt;bmiHeader.biWidth, </div><div class="line">                        m_bmp-&gt;bmiHeader.biBitCount);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">//---------------------------------------------------------------------------------------</span></div><div class="line"><span class="keywordtype">void</span> Bitmap::create_from_bmp(BITMAPINFO *bmp)</div><div class="line">{</div><div class="line">    <span class="keywordflow">if</span>(bmp)</div><div class="line">    {</div><div class="line">        m_img_size  = calc_row_len(bmp-&gt;bmiHeader.biWidth, </div><div class="line">                                    bmp-&gt;bmiHeader.biBitCount) * </div><div class="line">                        bmp-&gt;bmiHeader.biHeight;</div><div class="line"></div><div class="line">        m_full_size = calc_full_size(bmp);</div><div class="line">        m_bmp       = bmp;</div><div class="line">        m_buf       = calc_img_ptr(bmp);</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sat Dec 29 2018 16:44:30 for Lomse library. API documentation by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
